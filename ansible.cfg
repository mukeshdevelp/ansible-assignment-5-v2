[defaults]

roles_path=./roles
host_key_checking=False
retry_files_enabled=False
# change the workspace path as per jenkins workspace
timeout=30
inventory=./aws_ec2.yml 
gathering=explicit
fact_caching=memory
# Disable inventory caching to force fresh lookups
inventory_cache_enabled=False
inventory_cache_plugin=auto

# SSH connection settings to prevent hanging and connection reuse
[ssh_connection]
# Completely disable ControlMaster to prevent connection reuse issues
ssh_args=-o ControlMaster=no -o ControlPath=none -o ControlPersist=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o ServerAliveInterval=10 -o ServerAliveCountMax=3 -o ConnectTimeout=20 -o BatchMode=yes -o TCPKeepAlive=yes
pipelining=True
# Don't use control path at all
control_path=None
retries=3
timeout=20

[inventory]
enable_plugins = amazon.aws.aws_ec2


