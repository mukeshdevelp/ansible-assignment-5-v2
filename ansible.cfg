[defaults]

roles_path=./roles
host_key_checking=False
retry_files_enabled=False
# change the workspace path as per jenkins workspace
timeout=30
inventory=./aws_ec2.yml 
gathering=explicit
fact_caching=memory
# Disable inventory caching to force fresh lookups
inventory_cache_enabled=False
inventory_cache_plugin=auto

# SSH connection settings to prevent hanging and connection reuse
[ssh_connection]
# Completely disable ControlMaster to prevent connection reuse issues
# Increased ServerAliveInterval to 5s and CountMax to 12 to prevent timeouts during long playbooks
ssh_args=-o ControlMaster=no -o ControlPath=none -o ControlPersist=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o ServerAliveInterval=5 -o ServerAliveCountMax=12 -o ConnectTimeout=30 -o BatchMode=yes -o TCPKeepAlive=yes -o Compression=no
pipelining=True
# Don't use control path at all
control_path=None
retries=5
timeout=60

[inventory]
enable_plugins = amazon.aws.aws_ec2


