---
plugin: amazon.aws.aws_ec2

regions:
  - us-east-1

filters:
  "tag:env": "sonarqube"
  

hostnames:
  - private-ip-address
  
compose:
  ansible_host: private_ip_address
  ansible_user: ubuntu
  ansible_ssh_private_key_file: "{{ lookup('env','WORKSPACE') }}/.ssh/sonarqube-key.pem"
keyed_groups:
  - key: tags.env
  - key: tags.Name

strict: False

# Use your venv Python
vars:
  ansible_python_interpreter: "{{ lookup('env','VIRTUAL_ENV') + '/bin/python3' }}"
